#!/bin/zsh

# analyze_wordle_list_analyzer.v0.2:
# script to tabulate letters in unsolved positions and display frequency of letters in those positions
# in remaining wordle answer set

# Developed on macos 16.2 and zsh 5.8.1

# Check if input file exists
  if [[ -e list_$i.txt ]]
    then
    print
    print "Wordle word list analyzer"
    print
    COUNT=$(wc -l < list_$i.txt)
    COUNT=${COUNT// }
    print "Current answer list (list_$i.txt) contains $COUNT words"
    print -n "Display list? (y/n):"
    read -r RESP0
    if [[ $RESP0 = "y" ]]
      then
      cat list_$i.txt
    fi
  else
    print "list_$1.txt not found. - Exiting"
    exit 1
  fi

# Create a more limited set of possible answers based on unused_wordle_answers.txt
  grep -f list_$i.txt unused_wordle_answers.txt > abridged_wordle_answer_list.txt
  print
  COUNT=$(wc -l < abridged_wordle_answer_list.txt)
  COUNT=${COUNT// }
  print "Answer list based on unused wordle answers contains $COUNT words"

  # Calculate total letter frequency of all words in list_$i.txt
  print
  print "Combined letter frequency of all words in abridged_wordle_answer_list.txt:"
  print
  grep -o . abridged_wordle_answer_list.txt | sort -f | uniq -ic | sort -nr 

  # Tabulate letter frequency in those positions where no exact match has been found

  print
  print "So far, \$ANSWER is $ANSWER"

  # Find which positions $ANSWER lacks identified letter

  for n in {0..4}; do
    POSITION=$(( n+1 ))
    #print "The letter at position $POSITION in \$ANSWER is ${ANSWER:$n:1}"
    if [[ ${ANSWER:$n:1} = "." ]]; then
      print
      print "No previously guessed letter in position $POSITION."
      # now tabulate the letters in that position in word list,
      # count the frequency, and display
      POSSIBLE[$POSITION]=$(cut -c $POSITION abridged_wordle_answer_list.txt | sort | uniq -c | sort -nr)
      print "Frequency of letters in position $POSITION in remaining possible answers:"
      print $POSSIBLE[$POSITION]

    else
      print
      print "The letter in position $POSITION is ${ANSWER:$n:1}"
    fi
  done

  print -n "Display abridged answer list? (y/n):"
  read -r RESP1
  if [[ $RESP1 = "y" ]]; then
    print
    cat abridged_wordle_answer_list.txt
  fi

  print
  print "Completed"

  return 0
